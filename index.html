<!DOCTYPE html>
<html lang="en">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  Â  <title>Basketball Stat Tracker</title>
Â  Â  Â  Â  <script src="https://cdn.tailwindcss.com"></script>
Â  Â  Â  Â  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

Â  Â  Â  Â  <link rel="manifest" href="/manifest.json">
Â  Â  <link rel="icon" href="/icons/icon-192x192.png" sizes="192x192" type="image/png">
Â  Â  <link rel="apple-touch-icon" href="/icons/icon-180x180.png">
Â  Â  <meta name="theme-color" content="#1a202c"/>

Â  Â  <style>
Â  Â  Â  Â  body {
Â  Â  Â  Â  Â  Â  font-family: 'Inter', sans-serif;
Â  Â  Â  Â  Â  Â  background-image: url('court.jpg'); /* This is already here! */
Â  Â  Â  Â  Â  Â  background-size: cover;
Â  Â  Â  Â  Â  Â  background-position: center;
Â  Â  Â  Â  Â  Â  background-repeat: no-repeat;
Â  Â  Â  Â  Â  Â  background-attachment: fixed;
Â  Â  Â  Â  Â  Â  background-color: #f0f2f5;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  Â  Â  align-items: flex-start;
Â  Â  Â  Â  Â  Â  min-height: 100vh;
Â  Â  Â  Â  Â  Â  padding: 0.25rem;
Â  Â  Â  Â  }
Â  Â  Â  Â  .container {
Â  Â  Â  Â  Â  Â  max-width: 600px;
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  /* This custom CSS is no longer needed since we're using a Tailwind class directly on the div.
Â  Â  Â  Â  Â  Â  Â  Â  You can remove this line if you're using Tailwind for background colors.
Â  Â  Â  Â  Â  Â  Â  Â  background-color: #ffffff; */
Â  Â  Â  Â  Â  Â  border-radius: 1.25rem;
Â  Â  Â  Â  Â  Â  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
Â  Â  Â  Â  Â  Â  padding: 0.75rem;
Â  Â  Â  Â  }
Â  Â  Â  Â  .btn-stat, .btn-score, .btn-action {
Â  Â  Â  Â  Â  Â  padding: 0.6rem 0.4rem;
Â  Â  Â  Â  Â  Â  font-weight: bold;
Â  Â  Â  Â  Â  Â  border-radius: 0.6rem;
Â  Â  Â  Â  Â  Â  transition: transform 0.1s ease-in-out, background-color 0.1s ease-in-out;
Â  Â  Â  Â  Â  Â  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  Â  Â  flex-direction: column;
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  line-height: 1.1;
Â  Â  Â  Â  Â  Â  user-select: none;
Â  Â  Â  Â  Â  Â  -webkit-tap-highlight-color: transparent;
Â  Â  Â  Â  }
Â  Â  Â  Â  .btn-stat:active, .btn-score:active, .btn-action:active {
Â  Â  Â  Â  Â  Â  transform: scale(0.98);
Â  Â  Â  Â  }
Â  Â  Â  Â  .stat-active {
Â  Â  Â  Â  Â  Â  background-color: #4f46e5;
Â  Â  Â  Â  Â  Â  color: white;
Â  Â  Â  Â  Â  Â  box-shadow: 0 3px 6px rgba(79, 70, 229, 0.3);
Â  Â  Â  Â  }
Â  Â  Â  Â  .stat-inactive {
Â  Â  Â  Â  Â  Â  background-color: #e0e7ff;
Â  Â  Â  Â  Â  Â  color: #4f46e5;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Player Button Styling */
Â  Â  Â  Â  .btn-player {
Â  Â  Â  Â  Â  Â  position: relative;
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  background-color: #e0e7ff;
Â  Â  Â  Â  Â  Â  color: #4f46e5;
Â  Â  Â  Â  Â  Â  padding: 0.7rem 0.5rem;
Â  Â  Â  Â  Â  Â  font-weight: bold;
Â  Â  Â  Â  Â  Â  border-radius: 0.6rem;
Â  Â  Â  Â  Â  Â  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
Â  Â  Â  Â  Â  Â  transition: transform 0.1s ease-in-out, background-color 0.1s ease-in-out, border 0.1s ease-in-out, box-shadow 0.1s ease-in-out;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  flex-direction: column;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  line-height: 1.1;
Â  Â  Â  Â  Â  Â  user-select: none;
Â  Â  Â  Â  Â  Â  -webkit-tap-highlight-color: transparent;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  border: 2px solid transparent;
Â  Â  Â  Â  }
Â  Â  Â  Â  .btn-player:hover {
Â  Â  Â  Â  Â  Â  Â background-color: #c7d2fe;
Â  Â  Â  Â  }
Â  Â  Â  Â  .player-active {
Â  Â  Â  Â  Â  Â  background-color: #bfdbfe;
Â  Â  Â  Â  Â  Â  border: 2px solid #2563eb;
Â  Â  Â  Â  Â  Â  box-shadow: 0 4px 8px rgba(37, 99, 235, 0.3);
Â  Â  Â  Â  }
Â  Â  Â  Â  .player-button-locked {
Â  Â  Â  Â  Â  Â  background-color: #d1d5db;
Â  Â  Â  Â  Â  Â  cursor: not-allowed;
Â  Â  Â  Â  }
Â  Â  Â  Â  .player-button-locked .player-name, .player-button-locked .player-stats span {
Â  Â  Â  Â  Â  Â  color: #6b7280;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Responsive adjustments for smaller screens */
Â  Â  Â  Â  @media (max-width: 480px) {
Â  Â  Â  Â  Â  Â  .btn-stat, .btn-action {
Â  Â  Â  Â  Â  Â  Â  Â  font-size: 0.7rem;
Â  Â  Â  Â  Â  Â  Â  Â  padding: 0.6rem 0.4rem;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  .btn-stat span {
Â  Â  Â  Â  Â  Â  Â  Â  font-size: 1.5rem;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  .scoreboard-container {
Â  Â  Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  Â  Â  flex-direction: row;
Â  Â  Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  Â  Â  justify-content: space-around;
Â  Â  Â  Â  Â  Â  Â  Â  background-color: #3b82f6;
Â  Â  Â  Â  Â  Â  Â  Â  color: white;
Â  Â  Â  Â  Â  Â  Â  Â  padding: 0.6rem;
Â  Â  Â  Â  Â  Â  Â  Â  border-radius: 0.6rem;
Â  Â  Â  Â  Â  Â  Â  Â  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
Â  Â  Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  /* Common styles for team sections in scoreboard */
Â  Â  Â  Â  Â  Â  #my-team-score-wrapper, #rival-team-score-wrapper {
Â  Â  Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  Â  Â  flex-direction: column;
Â  Â  Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  Â  Â  flex-grow: 1;
Â  Â  Â  Â  Â  Â  Â  Â  padding: 0.2rem;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  /* My Team Score (Number) */
Â  Â  Â  Â  Â  Â  #my-team-score {
Â  Â  Â  Â  Â  Â  Â  Â  font-size: 2.0rem; /* Consistent score font size */
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  /* Rival Team Score (Number - inside the button) */
Â  Â  Â  Â  Â  Â  #rival-team-score { /* Target the span directly for font size */
Â  Â  Â  Â  Â  Â  Â  Â  font-size: 2.0rem; /* Consistent score font size */
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  /* Style for the new clickable rival score button */
Â  Â  Â  Â  Â  Â  #rival-score-button {
Â  Â  Â  Â  Â  Â  Â  Â  background: none;
Â  Â  Â  Â  Â  Â  Â  Â  border: none;
Â  Â  Â  Â  Â  Â  Â  Â  padding: 0.2rem 0.5rem;
Â  Â  Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  Â  Â  color: inherit;
Â  Â  Â  Â  Â  Â  Â  Â  transition: transform 0.1s ease-in-out, color 0.1s ease-in-out;
Â  Â  Â  Â  Â  Â  Â  Â  font-weight: extrabold; /* Ensure bold for the number */
Â  Â  Â  Â  Â  Â  Â  Â  line-height: 1.0;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  #rival-score-button:active {
Â  Â  Â  Â  Â  Â  Â  Â  transform: scale(0.95);
Â  Â  Â  Â  Â  Â  Â  Â  color: #ffe600;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  .scoreboard-vs {
Â  Â  Â  Â  Â  Â  Â  Â  font-size: 1.2rem;
Â  Â  Â  Â  Â  Â  Â  Â  margin: 0 0.5rem;
Â  Â  Â  Â  Â  Â  Â  Â  font-weight: normal;
Â  Â  Â  Â  Â  Â  Â  Â  opacity: 0.8;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  /* My Team Title */
Â  Â  Â  Â  Â  Â  #my-team-score-wrapper .scoreboard-title {
Â  Â  Â  Â  Â  Â  Â  Â  font-size: 0.8rem; /* Consistent title font size */
Â  Â  Â  Â  Â  Â  Â  Â  font-weight: normal;
Â  Â  Â  Â  Â  Â  Â  Â  opacity: 0.9;
Â  Â  Â  Â  Â  Â  Â  Â  margin-bottom: 0.1rem;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  /* Rival Team Title */
Â  Â  Â  Â  Â  Â  #rival-team-score-wrapper .scoreboard-title {
Â  Â  Â  Â  Â  Â  Â  Â  font-size: 0.8rem; /* Consistent title font size */
Â  Â  Â  Â  Â  Â  Â  Â  font-weight: normal;
Â  Â  Â  Â  Â  Â  Â  Â  opacity: 0.9;
Â  Â  Â  Â  Â  Â  Â  Â  margin-bottom: 0.1rem;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  .player-name {
Â  Â  Â  Â  Â  Â  Â  Â  font-size: 0.7rem;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  .player-stats span {
Â  Â  Â  Â  Â  Â  Â  Â  font-size: 0.65rem;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  .player-stats {
Â  Â  Â  Â  Â  Â  Â  Â  margin-top: 0.05rem;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  .text-3xl { font-size: 1.5rem; }
Â  Â  Â  Â  Â  Â  .text-sm { font-size: 0.65rem; }
Â  Â  Â  Â  Â  Â  .text-lg { font-size: 0.8rem; }
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Modal styling */
Â  Â  Â  Â  .modal-overlay {
Â  Â  Â  Â  Â  Â  background-color: rgba(0, 0, 0, 0.6);
Â  Â  Â  Â  }
Â  Â  Â  Â  .modal-content {
Â  Â  Â  Â  Â  Â  background-color: white;
Â  Â  Â  Â  Â  Â  border-radius: 0.75rem;
Â  Â  Â  Â  Â  Â  padding: 1rem;
Â  Â  Â  Â  Â  Â  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
Â  Â  Â  Â  Â  Â  width: 90%;
Â  Â  Â  Â  Â  Â  max-width: 350px;
Â  Â  Â  Â  }
Â  Â  Â  Â  /* Report Modal Specifics */
Â  Â  Â  Â  #report-output {
Â  Â  Â  Â  Â  Â  white-space: pre-wrap;
Â  Â  Â  Â  Â  Â  word-wrap: break-word;
Â  Â  Â  Â  Â  Â  height: 200px;
Â  Â  Â  Â  Â  Â  overflow-y: auto;
Â  Â  Â  Â  Â  Â  border: 1px solid #e2e8f0;
Â  Â  Â  Â  Â  Â  background-color: #f8fafc;
Â  Â  Â  Â  Â  Â  padding: 0.75rem;
Â  Â  Â  Â  Â  Â  border-radius: 0.5rem;
Â  Â  Â  Â  Â  Â  font-size: 0.875rem;
Â  Â  Â  Â  Â  Â  line-height: 1.4;
Â  Â  Â  Â  Â  Â  color: #334155;
Â  Â  Â  Â  Â  Â  resize: vertical;
Â  Â  Â  Â  }
Â  Â  </style>
</head>
<body class="bg-gradient-to-br from-indigo-50 to-purple-50">
Â  Â  Â  Â  <div class="container mx-auto p-6 bg-white/70 rounded-3xl shadow-xl mt-8">
Â  Â  Â  Â  <h1 class="text-3xl font-extrabold text-center text-gray-900 mb-6">Basketball Game Tracker</h1>
Â  Â  Â  Â  <p class="text-center text-gray-600 mb-6 text-sm">Data stored locally in your browser.</p>

Â  Â  Â  Â  Â  Â  Â  Â  <div id="stat-buttons" class="grid grid-cols-2 sm:grid-cols-4 gap-2 mb-4">
Â  Â  Â  Â  Â  Â  <button id="shots-btn" class="btn-stat stat-active bg-indigo-600 text-white hover:bg-indigo-700">
Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-xl sm:text-2xl font-extrabold">ğŸ€</span> Shots
Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  <button id="rebounds-btn" class="btn-stat stat-inactive bg-indigo-100 text-indigo-700 hover:bg-indigo-200">
Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-xl sm:text-2xl font-extrabold">ğŸ’ª</span> Rebounds
Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  <button id="assists-btn" class="btn-stat stat-inactive bg-indigo-100 text-indigo-700 hover:bg-indigo-200">
Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-xl sm:text-2xl font-extrabold">ğŸ¤</span> Assists
Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  <button id="points-btn" class="btn-stat stat-inactive bg-indigo-100 text-indigo-700 hover:bg-indigo-200">
Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-xl sm:text-2xl font-extrabold">ğŸ”¥</span> Points
Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <div class="scoreboard-container bg-gradient-to-r from-blue-700 to-indigo-800 text-white shadow-lg mb-4">
Â  Â  Â  Â  Â  Â  <div id="my-team-score-wrapper" class="flex flex-col items-center flex-grow py-0.5">
Â  Â  Â  Â  Â  Â  Â  Â  <h2 class="scoreboard-title">My Team</h2>
Â  Â  Â  Â  Â  Â  Â  Â  <span id="my-team-score" class="font-extrabold text-yellow-300 drop-shadow-lg">0</span>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="scoreboard-vs font-bold text-gray-300">vs</div>
Â  Â  Â  Â  Â  Â  <div id="rival-team-score-wrapper" class="flex flex-col items-center flex-grow py-0.5">
Â  Â  Â  Â  Â  Â  Â  Â  <h2 class="scoreboard-title">Rival Points</h2>
Â  Â  Â  Â  Â  Â  Â  Â  <button id="rival-score-button" class="text-white hover:text-yellow-200 active:scale-95 transition-transform">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span id="rival-team-score" class="font-extrabold">0</span>
Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <div id="players-grid" class="grid grid-cols-2 gap-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex justify-center mt-4 space-x-2">
Â  Â  Â  Â  Â  Â  <button id="reset-game-btn" class="btn-action bg-yellow-500 text-white hover:bg-yellow-600 px-4 py-1.5 text-md">Reset Game</button>
Â  Â  Â  Â  Â  Â  <button id="edit-all-players-btn" class="btn-action bg-blue-500 text-white hover:bg-blue-600 px-4 py-1.5 text-md">Edit Players</button>
Â  Â  Â  Â  Â  Â  <button id="generate-report-btn" class="btn-action bg-green-500 text-white hover:bg-green-600 px-4 py-1.5 text-md">Generate Report</button>
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  Â  Â  <div id="edit-all-players-modal" class="fixed inset-0 modal-overlay flex items-center justify-center p-4 z-50 hidden">
Â  Â  Â  Â  <div class="modal-content transform transition-all duration-300 scale-95 opacity-0 max-h-[90vh] overflow-y-auto">
Â  Â  Â  Â  Â  Â  <h3 class="text-xl font-bold mb-3 text-gray-800">Edit All Players</h3>
Â  Â  Â  Â  Â  Â  <div id="all-players-edit-list" class="space-y-3 mb-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="flex justify-end space-x-2">
Â  Â  Â  Â  Â  Â  Â  Â  <button id="save-all-players-btn" class="px-4 py-1.5 rounded-md bg-indigo-600 text-white hover:bg-indigo-700 font-semibold text-sm">Save All</button>
Â  Â  Â  Â  Â  Â  Â  Â  <button id="cancel-all-edit-btn" class="px-4 py-1.5 rounded-md bg-red-500 text-white hover:bg-red-600 font-semibold text-sm">Cancel</button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  Â  Â  <div id="report-modal" class="fixed inset-0 modal-overlay flex items-center justify-center p-4 z-50 hidden">
Â  Â  Â  Â  <div class="modal-content transform transition-all duration-300 scale-95 opacity-0">
Â  Â  Â  Â  Â  Â  <h3 class="text-xl font-bold mb-3 text-gray-800">Game Report</h3>
Â  Â  Â  Â  Â  Â  <div id="report-output" contenteditable="true" class="w-full h-48 mb-4"></div>
Â  Â  Â  Â  Â  Â  <div class="flex justify-end space-x-2">
Â  Â  Â  Â  Â  Â  Â  Â  <button id="copy-report-btn" class="px-4 py-1.5 rounded-md bg-blue-600 text-white hover:bg-blue-700 font-semibold text-sm">Copy to Clipboard</button>
Â  Â  Â  Â  Â  Â  Â  Â  <button id="close-report-btn" class="px-4 py-1.5 rounded-md bg-gray-300 text-gray-800 hover:bg-gray-400 font-semibold text-sm">Close</button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  </div>


Â  Â  Â  Â  <div id="message-box-modal" class="fixed inset-0 modal-overlay flex items-center justify-center p-4 z-50 hidden">
Â  Â  Â  Â  <div class="modal-content transform transition-all duration-300 scale-95 opacity-0">
Â  Â  Â  Â  Â  Â  <h3 id="message-box-title" class="text-xl font-bold mb-3 text-gray-800"></h3>
Â  Â  Â  Â  Â  Â  <p id="message-box-message" class="text-gray-700 mb-5 text-sm"></p>
Â  Â  Â  Â  Â  Â  <div class="flex justify-end space-x-2">
Â  Â  Â  Â  Â  Â  Â  Â  <button id="message-box-confirm-btn" class="px-4 py-1.5 rounded-md bg-indigo-600 text-white hover:bg-indigo-700 font-semibold hidden text-sm">Confirm</button>
Â  Â  Â  Â  Â  Â  Â  Â  <button id="message-box-cancel-btn" class="px-4 py-1.5 rounded-md bg-gray-300 text-gray-800 hover:bg-gray-400 font-semibold hidden text-sm">Cancel</button>
Â  Â  Â  Â  Â  Â  Â  Â  <button id="message-box-ok-btn" class="px-4 py-1.5 rounded-md bg-indigo-600 text-white hover:bg-indigo-700 font-semibold hidden text-sm">OK</button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  </div>


Â  Â  <script type="module">
Â  Â  Â  Â  // --- Game State Variables ---
Â  Â  Â  Â  let myTeamScore = 0;
Â  Â  Â  Â  let rivalTeamScore = 0;
Â  Â  Â  Â  const STAT_TYPES = ['shots', 'rebounds', 'assists', 'points'];
Â  Â  Â  Â  let activeStat = 'shots'; // Default active stat
Â  Â  Â  Â  let players = []; // Array to hold player objects
Â  Â  Â  Â  let activePlayerId = null; // New variable to track the currently selected player

Â  Â  Â  Â  // --- Message Box Utility ---
Â  Â  Â  Â  const messageBoxModal = document.getElementById('message-box-modal');
Â  Â  Â  Â  const messageBoxTitle = document.getElementById('message-box-title');
Â  Â  Â  Â  const messageBoxMessage = document.getElementById('message-box-message');
Â  Â  Â  Â  const messageBoxConfirmBtn = document.getElementById('message-box-confirm-btn');
Â  Â  Â  Â  const messageBoxCancelBtn = document.getElementById('message-box-cancel-btn');
Â  Â  Â  Â  const messageBoxOkBtn = document.getElementById('message-box-ok-btn');

Â  Â  Â  Â  function showMessageBox(title, message, type = 'alert', onConfirm = null, onCancel = null) {
Â  Â  Â  Â  Â  Â  messageBoxTitle.textContent = title;
Â  Â  Â  Â  Â  Â  messageBoxMessage.textContent = message;

Â  Â  Â  Â  Â  Â  messageBoxConfirmBtn.classList.add('hidden');
Â  Â  Â  Â  Â  Â  messageBoxCancelBtn.classList.add('hidden');
Â  Â  Â  Â  Â  Â  messageBoxOkBtn.classList.add('hidden');

Â  Â  Â  Â  Â  Â  // Remove previous event listeners
Â  Â  Â  Â  Â  Â  messageBoxConfirmBtn.onclick = null;
Â  Â  Â  Â  Â  Â  messageBoxCancelBtn.onclick = null;
Â  Â  Â  Â  Â  Â  messageBoxOkBtn.onclick = null;

Â  Â  Â  Â  Â  Â  if (type === 'confirm') {
Â  Â  Â  Â  Â  Â  Â  Â  messageBoxConfirmBtn.classList.remove('hidden');
Â  Â  Â  Â  Â  Â  Â  Â  messageBoxCancelBtn.classList.remove('hidden');
Â  Â  Â  Â  Â  Â  Â  Â  messageBoxConfirmBtn.onclick = () => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  messageBoxModal.classList.add('hidden');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (onConfirm) onConfirm();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Animate out
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  messageBoxModal.querySelector('.modal-content').classList.remove('scale-100', 'opacity-100');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  messageBoxModal.querySelector('.modal-content').classList.add('scale-95', 'opacity-0');
Â  Â  Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  Â  Â  messageBoxCancelBtn.onclick = () => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  messageBoxModal.classList.add('hidden');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (onCancel) onCancel();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Animate out
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  messageBoxModal.querySelector('.modal-content').classList.remove('scale-100', 'opacity-100');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  messageBoxModal.querySelector('.modal-content').classList.add('scale-95', 'opacity-0');
Â  Â  Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  } else { // 'alert'
Â  Â  Â  Â  Â  Â  Â  Â  messageBoxOkBtn.classList.remove('hidden');
Â  Â  Â  Â  Â  Â  Â  Â  messageBoxOkBtn.onclick = () => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  messageBoxModal.classList.add('hidden');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â // Animate out
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  messageBoxModal.querySelector('.modal-content').classList.remove('scale-100', 'opacity-100');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  messageBoxModal.querySelector('.modal-content').classList.add('scale-95', 'opacity-0');
Â  Â  Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  messageBoxModal.classList.remove('hidden');
Â  Â  Â  Â  Â  Â  // Animate in
Â  Â  Â  Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  Â  Â  Â  Â  messageBoxModal.querySelector('.modal-content').classList.remove('scale-95', 'opacity-0');
Â  Â  Â  Â  Â  Â  Â  Â  messageBoxModal.querySelector('.modal-content').classList.add('scale-100', 'opacity-100');
Â  Â  Â  Â  Â  Â  }, 50);
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- Game State Management (Local) ---
Â  Â  Â  Â  function initialSetup() {
Â  Â  Â  Â  Â  Â  // Initialize players if they don't exist
Â  Â  Â  Â  Â  Â  if (players.length === 0) {
Â  Â  Â  Â  Â  Â  Â  Â  for (let i = 1; i <= 10; i++) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  players.push({
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  id: `player${i}`,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  name: `Player ${i}`,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  locked: false,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  stats: { shots: 0, rebounds: 0, assists: 0, points: 0 }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  updateUI();
Â  Â  Â  Â  }

Â  Â  Â  Â  function updateUI() {
Â  Â  Â  Â  Â  Â  document.getElementById('my-team-score').textContent = myTeamScore;
Â  Â  Â  Â  Â  Â  document.getElementById('rival-team-score').textContent = rivalTeamScore;

Â  Â  Â  Â  Â  Â  // Update stat buttons styling
Â  Â  Â  Â  Â  Â  STAT_TYPES.forEach(stat => {
Â  Â  Â  Â  Â  Â  Â  Â  const button = document.getElementById(`${stat}-btn`);
Â  Â  Â  Â  Â  Â  Â  Â  if (button) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (stat === activeStat) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  button.classList.add('stat-active');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  button.classList.remove('stat-inactive');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  button.classList.remove('bg-indigo-100', 'text-indigo-700', 'hover:bg-indigo-200');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  button.classList.add('bg-indigo-600', 'text-white', 'hover:bg-indigo-700');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  button.classList.remove('stat-active');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  button.classList.add('stat-inactive');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  button.classList.remove('bg-indigo-600', 'text-white', 'hover:bg-indigo-700');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  button.classList.add('bg-indigo-100', 'text-indigo-700', 'hover:bg-indigo-200');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  // Render player buttons
Â  Â  Â  Â  Â  Â  const playersGrid = document.getElementById('players-grid');
Â  Â  Â  Â  Â  Â  playersGrid.innerHTML = ''; // Clear existing buttons

Â  Â  Â  Â  Â  Â  players.forEach(player => {
Â  Â  Â  Â  Â  Â  Â  Â  const playerButton = document.createElement('button');
Â  Â  Â  Â  Â  Â  Â  Â  playerButton.id = `player-btn-${player.id}`;
Â  Â  Â  Â  Â  Â  Â  Â  playerButton.className = `btn-player w-full`;
Â  Â  Â  Â  Â  Â  Â  Â  if (player.locked) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  playerButton.classList.add('player-button-locked');
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  if (player.id === activePlayerId) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  playerButton.classList.add('player-active');
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  playerButton.innerHTML = `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="player-name text-sm font-semibold">${player.name}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="player-stats text-xs text-gray-600 mt-0.5">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="shots-stat">S: ${player.stats.shots}</span> |
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="rebounds-stat">R: ${player.stats.rebounds}</span> |
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="assists-stat">A: ${player.stats.assists}</span> |
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="points-stat">P: ${player.stats.points}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  `;

Â  Â  Â  Â  Â  Â  Â  Â  playerButton.addEventListener('click', () => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  activePlayerId = player.id;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  incrementPlayerStat(player.id);
Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  playersGrid.appendChild(playerButton);
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }

Â  Â  Â  Â  function changeStatMode(mode) {
Â  Â  Â  Â  Â  Â  activeStat = mode;
Â  Â  Â  Â  Â  Â  saveGameData();
Â  Â  Â  Â  Â  Â  updateUI();
Â  Â  Â  Â  }

Â  Â  Â  Â  function incrementPlayerStat(playerId) {
Â  Â  Â  Â  Â  Â  const playerIndex = players.findIndex(p => p.id === playerId);
Â  Â  Â  Â  Â  Â  if (playerIndex !== -1) {
Â  Â  Â  Â  Â  Â  Â  Â  if (players[playerIndex].locked) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  showMessageBox('Locked Player', 'This player is locked and cannot be edited or have stats incremented.', 'alert');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  // Adjusted logic to increment player points by 2
Â  Â  Â  Â  Â  Â  Â  Â  if (activeStat === 'points') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  players[playerIndex].stats[activeStat] += 2;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  myTeamScore += 2;
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  players[playerIndex].stats[activeStat]++;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  saveGameData();
Â  Â  Â  Â  Â  Â  Â  Â  updateUI();
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  console.error(`Player with ID ${playerId} not found.`);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  function incrementRivalPoints() {
Â  Â  Â  Â  Â  Â  rivalTeamScore += 2;
Â  Â  Â  Â  Â  Â  saveGameData();
Â  Â  Â  Â  Â  Â  updateUI();
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- Local Storage Operations ---
Â  Â  Â  Â  const LOCAL_STORAGE_KEY = 'basketballGameData';

Â  Â  Â  Â  function saveGameData() {
Â  Â  Â  Â  Â  Â  const dataToSave = {
Â  Â  Â  Â  Â  Â  Â  Â  myTeamScore: myTeamScore,
Â  Â  Â  Â  Â  Â  Â  Â  rivalTeamScore: rivalTeamScore,
Â  Â  Â  Â  Â  Â  Â  Â  players: players.map(player => ({
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ...player,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  stats: { ...player.stats }
Â  Â  Â  Â  Â  Â  Â  Â  })),
Â  Â  Â  Â  Â  Â  Â  Â  activeStat: activeStat,
Â  Â  Â  Â  Â  Â  Â  Â  activePlayerId: activePlayerId
Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(dataToSave));
Â  Â  Â  Â  Â  Â  } catch (e) {
Â  Â  Â  Â  Â  Â  Â  Â  console.error("Error saving game data to Local Storage: ", e);
Â  Â  Â  Â  Â  Â  Â  Â  showMessageBox('Save Error', `Failed to save game data locally: ${e.message}`, 'alert');
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  function loadGameData() {
Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  const savedData = localStorage.getItem(LOCAL_STORAGE_KEY);
Â  Â  Â  Â  Â  Â  Â  Â  if (savedData) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const data = JSON.parse(savedData);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  myTeamScore = data.myTeamScore || 0;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  rivalTeamScore = data.rivalTeamScore || 0;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  players = data.players || [];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  activeStat = data.activeStat || 'shots';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  activePlayerId = data.activePlayerId || null;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  initialSetup();
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  initialSetup();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  saveGameData();
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  } catch (e) {
Â  Â  Â  Â  Â  Â  Â  Â  console.error("Error loading game data from Local Storage: ", e);
Â  Â  Â  Â  Â  Â  Â  Â  showMessageBox('Load Error', `Failed to load game data locally: ${e.message}`, 'alert');
Â  Â  Â  Â  Â  Â  Â  Â  initialSetup();
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- Global Edit Players Modal Logic ---
Â  Â  Â  Â  const editAllPlayersModal = document.getElementById('edit-all-players-modal');
Â  Â  Â  Â  const allPlayersEditList = document.getElementById('all-players-edit-list');
Â  Â  Â  Â  const saveAllPlayersBtn = document.getElementById('save-all-players-btn');
Â  Â  Â  Â  const cancelAllEditBtn = document.getElementById('cancel-all-edit-btn');
Â  Â  Â  Â  const editAllPlayersBtn = document.getElementById('edit-all-players-btn');

Â  Â  Â  Â  editAllPlayersBtn.addEventListener('click', openEditAllPlayersModal);

Â  Â  Â  Â  function openEditAllPlayersModal() {
Â  Â  Â  Â  Â  Â  allPlayersEditList.innerHTML = '';

Â  Â  Â  Â  Â  Â  players.forEach(player => {
Â  Â  Â  Â  Â  Â  Â  Â  const playerEditDiv = document.createElement('div');
Â  Â  Â  Â  Â  Â  Â  Â  playerEditDiv.className = 'flex items-center space-x-2 p-2 bg-gray-50 rounded-md';
Â  Â  Â  Â  Â  Â  Â  Â  playerEditDiv.dataset.playerId = player.id;

Â  Â  Â  Â  Â  Â  Â  Â  playerEditDiv.innerHTML = `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" value="${player.name}" placeholder="Player Name" class="flex-grow p-1 border border-gray-300 rounded-md text-gray-800 text-sm">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="toggle-lock-btn px-2 py-1 rounded-md bg-gray-200 text-gray-700 text-xs font-semibold">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${player.locked ? 'Unlock Name' : 'Lock Name'}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  Â  Â  allPlayersEditList.appendChild(playerEditDiv);

Â  Â  Â  Â  Â  Â  Â  Â  const toggleLockBtn = playerEditDiv.querySelector('.toggle-lock-btn');
Â  Â  Â  Â  Â  Â  Â  Â  toggleLockBtn.addEventListener('click', () => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const currentLockedStatus = players.find(p => p.id === player.id).locked;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  players.find(p => p.id === player.id).locked = !currentLockedStatus;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  toggleLockBtn.textContent = !currentLockedStatus ? 'Unlock Name' : 'Lock Name';
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  editAllPlayersModal.classList.remove('hidden');
Â  Â  Â  Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  Â  Â  Â  Â  editAllPlayersModal.querySelector('.modal-content').classList.remove('scale-95', 'opacity-0');
Â  Â  Â  Â  Â  Â  Â  Â  editAllPlayersModal.querySelector('.modal-content').classList.add('scale-100', 'opacity-100');
Â  Â  Â  Â  Â  Â  }, 50);
Â  Â  Â  Â  }

Â  Â  Â  Â  saveAllPlayersBtn.addEventListener('click', () => {
Â  Â  Â  Â  Â  Â  const playerEditDivs = allPlayersEditList.querySelectorAll('[data-player-id]');
Â  Â  Â  Â  Â  Â  playerEditDivs.forEach(div => {
Â  Â  Â  Â  Â  Â  Â  Â  const playerId = div.dataset.playerId;
Â  Â  Â  Â  Â  Â  Â  Â  const newName = div.querySelector('input[type="text"]').value.trim();
Â  Â  Â  Â  Â  Â  Â  Â  const playerIndex = players.findIndex(p => p.id === playerId);
Â  Â  Â  Â  Â  Â  Â  Â  if (playerIndex !== -1) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  players[playerIndex].name = newName || `Player ${playerIndex + 1}`;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  saveGameData();
Â  Â  Â  Â  Â  Â  updateUI();
Â  Â  Â  Â  Â  Â  closeEditAllPlayersModal();
Â  Â  Â  Â  });

Â  Â  Â  Â  cancelAllEditBtn.addEventListener('click', () => {
Â  Â  Â  Â  Â  Â  closeEditAllPlayersModal();
Â  Â  Â  Â  });

Â  Â  Â  Â  function closeEditAllPlayersModal() {
Â  Â  Â  Â  Â  Â  editAllPlayersModal.classList.add('hidden');
Â  Â  Â  Â  Â  Â  editAllPlayersModal.querySelector('.modal-content').classList.remove('scale-100', 'opacity-100');
Â  Â  Â  Â  Â  Â  editAllPlayersModal.querySelector('.modal-content').classList.add('scale-95', 'opacity-0');
Â  Â  Â  Â  }


Â  Â  Â  Â  // --- Report Modal Logic ---
Â  Â  Â  Â  const reportModal = document.getElementById('report-modal');
Â  Â  Â  Â  const reportOutput = document.getElementById('report-output');
Â  Â  Â  Â  const generateReportBtn = document.getElementById('generate-report-btn');
Â  Â  Â  Â  const copyReportBtn = document.getElementById('copy-report-btn');
Â  Â  Â  Â  const closeReportBtn = document.getElementById('close-report-btn');

Â  Â  Â  Â  generateReportBtn.addEventListener('click', () => {
Â  Â  Â  Â  Â  Â  const reportContent = generateReport();
Â  Â  Â  Â  Â  Â  reportOutput.textContent = reportContent;
Â  Â  Â  Â  Â  Â  reportModal.classList.remove('hidden');
Â  Â  Â  Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  Â  Â  Â  Â  reportModal.querySelector('.modal-content').classList.remove('scale-95', 'opacity-0');
Â  Â  Â  Â  Â  Â  Â  Â  reportModal.querySelector('.modal-content').classList.add('scale-100', 'opacity-100');
Â  Â  Â  Â  Â  Â  }, 50);
Â  Â  Â  Â  });

Â  Â  Â  Â  copyReportBtn.addEventListener('click', () => {
Â  Â  Â  Â  Â  Â  if (reportOutput) {
Â  Â  Â  Â  Â  Â  Â  Â  const range = document.createRange();
Â  Â  Â  Â  Â  Â  Â  Â  range.selectNodeContents(reportOutput);
Â  Â  Â  Â  Â  Â  Â  Â  const selection = window.getSelection();
Â  Â  Â  Â  Â  Â  Â  Â  selection.removeAllRanges();
Â  Â  Â  Â  Â  Â  Â  Â  selection.addRange(range);
Â  Â  Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.execCommand('copy');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  showMessageBox('Copied!', 'Report copied to clipboard.', 'alert');
Â  Â  Â  Â  Â  Â  Â  Â  } catch (err) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.error('Failed to copy text: ', err);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  showMessageBox('Copy Error', 'Failed to copy report to clipboard. Please try manually selecting and copying the text.', 'alert');
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  selection.removeAllRanges();
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  });


Â  Â  Â  Â  closeReportBtn.addEventListener('click', () => {
Â  Â  Â  Â  Â  Â  reportModal.classList.add('hidden');
Â  Â  Â  Â  Â  Â  reportModal.querySelector('.modal-content').classList.remove('scale-100', 'opacity-100');
Â  Â  Â  Â  Â  Â  reportModal.querySelector('.modal-content').classList.add('scale-95', 'opacity-0');
Â  Â  Â  Â  });

Â  Â  Â  Â  function generateReport() {
Â  Â  Â  Â  Â  Â  let report = `Basketball Game Report\n`;
Â  Â  Â  Â  Â  Â  report += `-------------------------\n`;
Â  Â  Â  Â  Â  Â  report += `My Team Score: ${myTeamScore}\n`;
Â  Â  Â  Â  Â  Â  report += `Rival Team Score: ${rivalTeamScore}\n\n`;
Â  Â  Â  Â  Â  Â  report += `Player Statistics:\n`;
Â  Â  Â  Â  Â  Â  players.forEach(player => {
Â  Â  Â  Â  Â  Â  Â  Â  report += ` Â ${player.name}${player.locked ? ' (LOCKED)' : ''}:\n`;
Â  Â  Â  Â  Â  Â  Â  Â  report += ` Â  Â Shots: ${player.stats.shots}\n`;
Â  Â  Â  Â  Â  Â  Â  Â  report += ` Â  Â Rebounds: ${player.stats.rebounds}\n`;
Â  Â  Â  Â  Â  Â  Â  Â  report += ` Â  Â Assists: ${player.stats.assists}\n`;
Â  Â  Â  Â  Â  Â  Â  Â  report += ` Â  Â Points: ${player.stats.points}\n`;
Â  Â  Â  Â  Â  Â  Â  Â  report += `\n`;
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  report += `-------------------------\n`;
Â  Â  Â  Â  Â  Â  report += `Generated on: ${new Date().toLocaleString()}\n`;
Â  Â  Â  Â  Â  Â  return report;
Â  Â  Â  Â  }


Â  Â  Â  Â  // --- Event Listeners for Main Buttons ---
Â  Â  Â  Â  document.getElementById('shots-btn').addEventListener('click', () => changeStatMode('shots'));
Â  Â  Â  Â  document.getElementById('rebounds-btn').addEventListener('click', () => changeStatMode('rebounds'));
Â  Â  Â  Â  document.getElementById('assists-btn').addEventListener('click', () => changeStatMode('assists'));
Â  Â  Â  Â  document.getElementById('points-btn').addEventListener('click', () => changeStatMode('points'));
Â  Â  Â  Â  document.getElementById('rival-score-button').addEventListener('click', incrementRivalPoints); /* Updated ID here */

Â  Â  Â  Â  document.getElementById('reset-game-btn').addEventListener('click', () => {
Â  Â  Â  Â  Â  Â  showMessageBox(
Â  Â  Â  Â  Â  Â  Â  Â  'Reset Game',
Â  Â  Â  Â  Â  Â  Â  Â  'Are you sure you want to reset all scores and player stats?',
Â  Â  Â  Â  Â  Â  Â  Â  'confirm',
Â  Â  Â  Â  Â  Â  Â  Â  () => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  myTeamScore = 0;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  rivalTeamScore = 0;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  players.forEach(player => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  STAT_TYPES.forEach(stat => player.stats[stat] = 0);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  saveGameData();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  updateUI();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  showMessageBox('Game Reset', 'The game has been reset successfully!', 'alert');
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  });

Â  Â  Â  Â  // Register the Service Worker
Â  Â  Â  Â  if ('serviceWorker' in navigator) {
Â  Â  Â  Â  Â  Â  window.addEventListener('load', () => {
Â  Â  Â  Â  Â  Â  Â  Â  // Ensure service worker is only registered if protocol is http or https
Â  Â  Â  Â  Â  Â  Â  Â  if (location.protocol.startsWith('http')) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  navigator.serviceWorker.register('./sw.js')
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .then(registration => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log('Service Worker registered: ', registration);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  })
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .catch(registrationError => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.error('Service Worker registration failed: ', registrationError);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.warn('Service Worker not registered: Page must be served over HTTP or HTTPS.');
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }


Â  Â  Â  Â  // Load data from local storage on window load
Â  Â  Â  Â  window.addEventListener('load', loadGameData);
Â  Â  </script>
</body>
</html>
